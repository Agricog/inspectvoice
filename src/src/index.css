@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  html {
    -webkit-text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    scroll-behavior: smooth;
  }

  body {
    @apply bg-iv-bg text-iv-text font-sans;
    min-height: 100dvh;
    margin: 0;
    overflow-x: hidden;
  }

  /* Scrollbar styling for dark theme */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-iv-bg;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-iv-border rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-iv-border-light;
  }

  /* Focus visible for keyboard navigation — accessibility */
  :focus-visible {
    @apply outline-2 outline-offset-2 outline-iv-accent;
  }

  /* Remove default focus ring for mouse users */
  :focus:not(:focus-visible) {
    outline: none;
  }
}

@layer components {
  /* Panel — primary surface container */
  .iv-panel {
    @apply bg-iv-surface border border-iv-border rounded-lg;
  }

  .iv-panel-raised {
    @apply bg-iv-surface-2 border border-iv-border rounded-lg shadow-iv;
  }

  /* Buttons */
  .iv-btn {
    @apply inline-flex items-center justify-center gap-2
           px-4 py-2.5 rounded-lg font-medium text-sm
           transition-all duration-150
           focus-visible:outline-2 focus-visible:outline-offset-2
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .iv-btn-primary {
    @apply iv-btn bg-iv-accent text-iv-bg
           hover:bg-iv-accent-hover active:scale-[0.98]
           focus-visible:outline-iv-accent;
  }

  .iv-btn-secondary {
    @apply iv-btn bg-iv-surface-2 text-iv-text border border-iv-border
           hover:bg-iv-surface-3 hover:border-iv-border-light active:scale-[0.98]
           focus-visible:outline-iv-blue;
  }

  .iv-btn-ghost {
    @apply iv-btn text-iv-muted
           hover:text-iv-text hover:bg-iv-surface-2 active:scale-[0.98]
           focus-visible:outline-iv-blue;
  }

  .iv-btn-danger {
    @apply iv-btn bg-risk-very-high/10 text-risk-very-high border border-risk-very-high/20
           hover:bg-risk-very-high/20 active:scale-[0.98]
           focus-visible:outline-risk-very-high;
  }

  .iv-btn-icon {
    @apply inline-flex items-center justify-center
           w-10 h-10 rounded-lg
           text-iv-muted hover:text-iv-text hover:bg-iv-surface-2
           transition-all duration-150
           focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-iv-blue
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Inputs */
  .iv-input {
    @apply w-full px-3 py-2.5 rounded-lg
           bg-iv-surface-2 text-iv-text
           border border-iv-border
           placeholder:text-iv-muted-2
           focus:border-iv-accent focus:ring-1 focus:ring-iv-accent/30
           transition-colors duration-150;
  }

  .iv-select {
    @apply iv-input appearance-none cursor-pointer;
  }

  .iv-label {
    @apply block text-sm font-medium text-iv-muted mb-1.5;
  }

  /* Badges — risk ratings */
  .iv-badge {
    @apply inline-flex items-center gap-1 px-2 py-0.5
           text-xs font-semibold rounded-full uppercase tracking-wide;
  }

  .iv-badge-very-high {
    @apply iv-badge bg-risk-very-high/15 text-risk-very-high;
  }

  .iv-badge-high {
    @apply iv-badge bg-risk-high/15 text-risk-high;
  }

  .iv-badge-medium {
    @apply iv-badge bg-risk-medium/15 text-risk-medium;
  }

  .iv-badge-low {
    @apply iv-badge bg-risk-low/15 text-risk-low;
  }

  /* Status badges */
  .iv-badge-draft {
    @apply iv-badge bg-iv-blue/15 text-iv-blue;
  }

  .iv-badge-signed {
    @apply iv-badge bg-iv-accent/15 text-iv-accent;
  }

  /* Cards */
  .iv-card {
    @apply iv-panel p-4 transition-all duration-150;
  }

  .iv-card-interactive {
    @apply iv-card cursor-pointer
           hover:border-iv-border-light hover:shadow-iv;
  }

  /* Divider */
  .iv-divider {
    @apply border-t border-iv-border my-4;
  }
}

@layer utilities {
  /* Safe area padding for notched devices */
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  .pt-safe {
    padding-top: env(safe-area-inset-top, 0px);
  }

  /* Truncate multiline */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}
